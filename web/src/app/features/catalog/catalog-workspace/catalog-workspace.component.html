<section
  class="rounded-3xl border p-6"
  [class.border-slate-200]="!store.isDark()"
  [class.bg-white]="!store.isDark()"
  [class.shadow-sm]="!store.isDark()"
  [class.border-slate-700]="store.isDark()"
  [class.bg-slate-900]="store.isDark()"
>
  <h3
    class="text-lg font-bold"
    [class.text-slate-900]="!store.isDark()"
    [class.text-white]="store.isDark()"
  >
    Catalog Workspace
  </h3>
  <p
    class="mt-1 text-sm"
    [class.text-slate-500]="!store.isDark()"
    [class.text-slate-300]="store.isDark()"
  >
    Filter models, select one, and run firmware lookups.
  </p>

  <div class="mt-4 flex flex-wrap gap-3">
    <button
      class="rounded-xl border px-4 py-2 text-sm font-semibold transition"
      [class.border-slate-300]="!store.isDark()"
      [class.bg-white]="!store.isDark()"
      [class.text-slate-800]="!store.isDark()"
      [class.hover:bg-slate-100]="!store.isDark()"
      [class.border-slate-600]="store.isDark()"
      [class.bg-slate-800]="store.isDark()"
      [class.text-slate-100]="store.isDark()"
      [class.hover:bg-slate-700]="store.isDark()"
      type="button"
      (click)="store.loadCatalog(false)"
    >
      Load local catalog
    </button>
    <button
      class="rounded-xl bg-sky-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600"
      type="button"
      (click)="store.loadCatalog(true)"
    >
      Refresh catalog from LMSA
    </button>
  </div>

  @if (store.models().length > 0) {
    <div class="mt-6 grid gap-3 md:grid-cols-4">
      <div>
        <label
          class="block text-xs font-semibold uppercase tracking-wide"
          [class.text-slate-500]="!store.isDark()"
          [class.text-slate-400]="store.isDark()"
        >
          Category
        </label>
        <div class="relative mt-1 w-full">
          <button
            #categoryTrigger
            class="flex w-full items-center justify-between rounded-xl border px-2 py-2 text-left text-sm"
            [class.border-slate-300]="!store.isDark()"
            [class.bg-white]="!store.isDark()"
            [class.text-slate-900]="!store.isDark()"
            [class.border-slate-600]="store.isDark()"
            [class.bg-slate-800]="store.isDark()"
            [class.text-slate-100]="store.isDark()"
            type="button"
            aria-haspopup="listbox"
            [attr.aria-expanded]="isMenuOpen('category')"
            (click)="toggleCategoryMenu($event)"
          >
            <span class="truncate">{{ selectedCategoryLabel() }}</span>
            <span aria-hidden="true">▾</span>
          </button>

          @if (isMenuOpen('category')) {
            <div
              class="absolute z-30 max-h-64 w-full overflow-auto rounded-xl border py-1 shadow-lg"
              [class.bottom-full]="isMenuUpward('category')"
              [class.mb-1]="isMenuUpward('category')"
              [class.top-full]="!isMenuUpward('category')"
              [class.mt-1]="!isMenuUpward('category')"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              role="listbox"
            >
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectCategory('all', $event)"
              >
                All
              </button>
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectCategory('phone', $event)"
              >
                Phone
              </button>
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectCategory('tablet', $event)"
              >
                Tablet
              </button>
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectCategory('smart', $event)"
              >
                Smart
              </button>
            </div>
          }
        </div>
      </div>
      <div>
        <label
          class="block text-xs font-semibold uppercase tracking-wide"
          [class.text-slate-500]="!store.isDark()"
          [class.text-slate-400]="store.isDark()"
        >
          readSupport
        </label>
        <div class="relative mt-1 w-full">
          <button
            #readSupportTrigger
            class="flex w-full items-center justify-between rounded-xl border px-2 py-2 text-left text-sm"
            [class.border-slate-300]="!store.isDark()"
            [class.bg-white]="!store.isDark()"
            [class.text-slate-900]="!store.isDark()"
            [class.border-slate-600]="store.isDark()"
            [class.bg-slate-800]="store.isDark()"
            [class.text-slate-100]="store.isDark()"
            type="button"
            aria-haspopup="listbox"
            [attr.aria-expanded]="isMenuOpen('readSupport')"
            (click)="toggleReadSupportMenu($event)"
          >
            <span class="truncate">{{ selectedReadSupportLabel() }}</span>
            <span aria-hidden="true">▾</span>
          </button>

          @if (isMenuOpen('readSupport')) {
            <div
              class="absolute z-30 max-h-64 w-full overflow-auto rounded-xl border py-1 shadow-lg"
              [class.bottom-full]="isMenuUpward('readSupport')"
              [class.mb-1]="isMenuUpward('readSupport')"
              [class.top-full]="!isMenuUpward('readSupport')"
              [class.mt-1]="!isMenuUpward('readSupport')"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              role="listbox"
            >
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectReadSupport('all', $event)"
              >
                All
              </button>
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectReadSupport('true', $event)"
              >
                true
              </button>
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectReadSupport('false', $event)"
              >
                false
              </button>
            </div>
          }
        </div>
      </div>
      <div class="md:col-span-2">
        <label
          class="block text-xs font-semibold uppercase tracking-wide"
          [class.text-slate-500]="!store.isDark()"
          [class.text-slate-400]="store.isDark()"
        >
          Search
        </label>
        <input
          class="mt-1 w-full rounded-xl border px-2 py-2 text-sm"
          [class.border-slate-300]="!store.isDark()"
          [class.bg-white]="!store.isDark()"
          [class.text-slate-900]="!store.isDark()"
          [class.border-slate-600]="store.isDark()"
          [class.bg-slate-800]="store.isDark()"
          [class.text-slate-100]="store.isDark()"
          [ngModel]="store.searchText()"
          (ngModelChange)="store.setSearchText($event)"
          placeholder="model, market, platform..."
        />
      </div>
    </div>

    <div
      class="mt-4 overflow-hidden rounded-2xl border"
      [class.border-slate-200]="!store.isDark()"
      [class.bg-white]="!store.isDark()"
      [class.border-slate-700]="store.isDark()"
      [class.bg-slate-900]="store.isDark()"
    >
      <div
        class="grid grid-cols-[minmax(0,1.2fr)_minmax(0,1.2fr)_minmax(0,0.9fr)_minmax(0,0.9fr)_6.5rem] gap-3 border-b px-3 py-2 text-xs font-semibold uppercase tracking-wide"
        [class.border-slate-200]="!store.isDark()"
        [class.bg-slate-100]="!store.isDark()"
        [class.text-slate-500]="!store.isDark()"
        [class.border-slate-700]="store.isDark()"
        [class.bg-slate-800]="store.isDark()"
        [class.text-slate-300]="store.isDark()"
      >
        <span class="min-w-0">Model</span>
        <span class="min-w-0">Market</span>
        <span class="min-w-0">Platform</span>
        <span class="min-w-0">Category</span>
        <span class="text-right">readSupport</span>
      </div>
      @for (model of store.visibleModels(); track model.modelName + model.marketName) {
        <button
          class="grid w-full grid-cols-[minmax(0,1.2fr)_minmax(0,1.2fr)_minmax(0,0.9fr)_minmax(0,0.9fr)_6.5rem] items-center gap-3 border-b px-3 py-2 text-left text-sm transition"
          [class.border-slate-100]="!store.isDark()"
          [class.text-slate-700]="!store.isDark()"
          [class.hover:bg-sky-50]="!store.isDark()"
          [class.border-slate-800]="store.isDark()"
          [class.text-slate-200]="store.isDark()"
          [class.hover:bg-slate-800]="store.isDark()"
          [class.bg-sky-100]="
            !store.isDark() &&
            store.selectedModel()?.modelName === model.modelName &&
            store.selectedModel()?.marketName === model.marketName
          "
          [class.bg-slate-700]="
            store.isDark() &&
            store.selectedModel()?.modelName === model.modelName &&
            store.selectedModel()?.marketName === model.marketName
          "
          type="button"
          (click)="onSelectModel(model)"
        >
          <span class="min-w-0 truncate">{{ model.modelName }}</span>
          <span class="min-w-0 truncate">{{ model.marketName }}</span>
          <span class="min-w-0 truncate">{{ model.platform }}</span>
          <span class="min-w-0 truncate">{{ model.category }}</span>
          <span class="text-right">{{ model.readSupport ? 'true' : 'false' }}</span>
        </button>
      } @empty {
        <p
          class="p-3 text-sm"
          [class.text-slate-500]="!store.isDark()"
          [class.text-slate-300]="store.isDark()"
        >
          No models match current filters.
        </p>
      }
    </div>

    <div class="mt-3 flex items-center gap-3">
      <button
        class="rounded-lg border border-slate-300 px-3 py-1 text-sm"
        type="button"
        (click)="store.prevPage()"
      >
        Previous
      </button>
      <button
        class="rounded-lg border border-slate-300 px-3 py-1 text-sm"
        type="button"
        (click)="store.nextPage()"
      >
        Next
      </button>
      <span
        class="text-sm"
        [class.text-slate-600]="!store.isDark()"
        [class.text-slate-300]="store.isDark()"
      >
        Page {{ store.pageIndex() + 1 }} / {{ store.totalPages() }}
      </span>
      <span
        class="text-sm"
        [class.text-slate-600]="!store.isDark()"
        [class.text-slate-300]="store.isDark()"
      >
        Matches: {{ store.filteredModels().length }}
      </span>
    </div>
  }
</section>

@if (store.selectedModel()) {
  <section
    #selectedModelPanel
    class="mt-6 rounded-3xl border p-6"
    [class.border-slate-200]="!store.isDark()"
    [class.bg-white]="!store.isDark()"
    [class.shadow-sm]="!store.isDark()"
    [class.border-slate-700]="store.isDark()"
    [class.bg-slate-900]="store.isDark()"
  >
    <h3
      class="text-lg font-bold"
      [class.text-slate-900]="!store.isDark()"
      [class.text-white]="store.isDark()"
    >
      Selected model: {{ store.selectedModel()!.modelName }} ({{
        store.selectedModel()!.marketName
      }})
    </h3>

    @if (!store.selectedModelIsReadSupport()) {
      <p
        class="mt-2 text-sm"
        [class.text-slate-600]="!store.isDark()"
        [class.text-slate-300]="store.isDark()"
      >
        readSupport=false -> manual model lookup (`getResource`).
      </p>

      @if (store.countryOptions()?.foundCountrySelector) {
        <label
          class="mt-3 block text-xs font-semibold uppercase tracking-wide"
          [class.text-slate-500]="!store.isDark()"
          [class.text-slate-400]="store.isDark()"
        >
          Country
        </label>
        <div class="relative mt-1 w-full max-w-sm">
          <button
            #countryTrigger
            class="flex w-full items-center justify-between rounded-xl border px-3 py-2 text-left text-sm"
            [class.border-slate-300]="!store.isDark()"
            [class.bg-white]="!store.isDark()"
            [class.text-slate-900]="!store.isDark()"
            [class.border-slate-600]="store.isDark()"
            [class.bg-slate-800]="store.isDark()"
            [class.text-slate-100]="store.isDark()"
            type="button"
            aria-haspopup="listbox"
            [attr.aria-expanded]="isMenuOpen('country')"
            (click)="toggleCountryMenu($event)"
          >
            <span class="truncate">{{ selectedCountryLabel() }}</span>
            <span aria-hidden="true">▾</span>
          </button>

          @if (isMenuOpen('country')) {
            <div
              class="absolute z-30 max-h-64 w-full overflow-auto rounded-xl border py-1 shadow-lg"
              [class.bottom-full]="isMenuUpward('country')"
              [class.mb-1]="isMenuUpward('country')"
              [class.top-full]="!isMenuUpward('country')"
              [class.mt-1]="!isMenuUpward('country')"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              role="listbox"
            >
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectCountry('', $event)"
              >
                First branch value (default)
              </button>
              <button
                class="block w-full px-3 py-2 text-left text-sm"
                [class.text-slate-900]="!store.isDark()"
                [class.hover:bg-slate-100]="!store.isDark()"
                [class.text-slate-100]="store.isDark()"
                [class.hover:bg-slate-700]="store.isDark()"
                type="button"
                (click)="selectCountry('__ALL__', $event)"
              >
                All available
              </button>
              @for (countryValue of store.countryOptions()!.countryValues; track countryValue) {
                <button
                  class="block w-full px-3 py-2 text-left text-sm"
                  [class.text-slate-900]="!store.isDark()"
                  [class.hover:bg-slate-100]="!store.isDark()"
                  [class.text-slate-100]="store.isDark()"
                  [class.hover:bg-slate-700]="store.isDark()"
                  type="button"
                  (click)="selectCountry(countryValue, $event)"
                >
                  {{ countryValue }}
                </button>
              }
            </div>
          }
        </div>
      }

      <button
        class="mt-4 rounded-xl bg-sky-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600"
        type="button"
        (click)="store.runManualCatalogLookup()"
      >
        Run manual catalog lookup
      </button>

      @if (store.manualCatalogResult()) {
        <p
          class="mt-3 rounded-xl border p-3 text-xs"
          [class.border-slate-200]="!store.isDark()"
          [class.bg-slate-50]="!store.isDark()"
          [class.text-slate-700]="!store.isDark()"
          [class.border-slate-700]="store.isDark()"
          [class.bg-slate-800]="store.isDark()"
          [class.text-slate-200]="store.isDark()"
        >
          statesExplored={{ store.manualCatalogResult()!.statesExplored }}, lastCode={{
            store.manualCatalogResult()!.manualMatchResponseCode || 'N/A'
          }}, autoParams={{
            store.manualCatalogResult()!.autoMatchRequiredParameters.join(', ') || 'N/A'
          }}
        </p>
      }
    } @else {
      <p
        class="mt-2 text-sm"
        [class.text-slate-600]="!store.isDark()"
        [class.text-slate-300]="store.isDark()"
      >
        readSupport=true -> choose lookup mode.
      </p>

      @if (store.readSupportHints()) {
        <p
          class="mt-2 rounded-xl border p-3 text-xs"
          [class.border-slate-200]="!store.isDark()"
          [class.bg-slate-50]="!store.isDark()"
          [class.text-slate-700]="!store.isDark()"
          [class.border-slate-700]="store.isDark()"
          [class.bg-slate-800]="store.isDark()"
          [class.text-slate-200]="store.isDark()"
        >
          platform={{ store.readSupportHints()!.platform || 'N/A' }}, required={{
            store.readSupportHints()!.requiredParameters.join(', ') || 'none'
          }}
        </p>
      }

      <div class="mt-4 flex flex-wrap gap-2">
        <button
          class="rounded-lg px-3 py-1 text-sm font-semibold transition"
          [class.bg-sky-700]="store.readSupportMode() === 'imei'"
          [class.text-white]="store.readSupportMode() === 'imei'"
          [class.bg-slate-100]="store.readSupportMode() !== 'imei' && !store.isDark()"
          [class.text-slate-700]="store.readSupportMode() !== 'imei' && !store.isDark()"
          [class.bg-slate-800]="store.readSupportMode() !== 'imei' && store.isDark()"
          [class.text-slate-200]="store.readSupportMode() !== 'imei' && store.isDark()"
          type="button"
          (click)="store.setReadSupportMode('imei')"
        >
          IMEI {{ store.recommendedReadSupportMode() === 'imei' ? '(recommended)' : '' }}
        </button>
        @if (store.selectedModelSupportsSnLookup()) {
          <button
            class="rounded-lg px-3 py-1 text-sm font-semibold transition"
            [class.bg-sky-700]="store.readSupportMode() === 'sn'"
            [class.text-white]="store.readSupportMode() === 'sn'"
            [class.bg-slate-100]="store.readSupportMode() !== 'sn' && !store.isDark()"
            [class.text-slate-700]="store.readSupportMode() !== 'sn' && !store.isDark()"
            [class.bg-slate-800]="store.readSupportMode() !== 'sn' && store.isDark()"
            [class.text-slate-200]="store.readSupportMode() !== 'sn' && store.isDark()"
            type="button"
            (click)="store.setReadSupportMode('sn')"
          >
            Serial {{ store.recommendedReadSupportMode() === 'sn' ? '(recommended)' : '' }}
          </button>
        }
        <button
          class="rounded-lg px-3 py-1 text-sm font-semibold transition"
          [class.bg-sky-700]="store.readSupportMode() === 'params'"
          [class.text-white]="store.readSupportMode() === 'params'"
          [class.bg-slate-100]="store.readSupportMode() !== 'params' && !store.isDark()"
          [class.text-slate-700]="store.readSupportMode() !== 'params' && !store.isDark()"
          [class.bg-slate-800]="store.readSupportMode() !== 'params' && store.isDark()"
          [class.text-slate-200]="store.readSupportMode() !== 'params' && store.isDark()"
          type="button"
          (click)="store.setReadSupportMode('params')"
        >
          Required Params
        </button>
      </div>

      @if (store.readSupportMode() === 'imei') {
        <div class="mt-4 grid gap-3 md:grid-cols-2">
          <div>
            <label
              class="block text-xs font-semibold uppercase tracking-wide"
              [class.text-slate-500]="!store.isDark()"
              [class.text-slate-400]="store.isDark()"
              >IMEI</label
            >
            <input
              class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.text-slate-900]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              [class.text-slate-100]="store.isDark()"
              placeholder="Optional"
              [ngModel]="store.imei()"
              (ngModelChange)="store.imei.set($event)"
            />
          </div>
        </div>
      }

      @if (store.readSupportMode() === 'sn') {
        <div class="mt-4 grid gap-3 md:grid-cols-2">
          <div>
            <label
              class="block text-xs font-semibold uppercase tracking-wide"
              [class.text-slate-500]="!store.isDark()"
              [class.text-slate-400]="store.isDark()"
              >SN</label
            >
            <input
              class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.text-slate-900]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              [class.text-slate-100]="store.isDark()"
              [ngModel]="store.sn()"
              (ngModelChange)="store.sn.set($event)"
            />
          </div>
        </div>
      }

      @if (store.readSupportMode() === 'params') {
        <div class="mt-4 grid gap-3 md:grid-cols-2">
          <div>
            <label
              class="block text-xs font-semibold uppercase tracking-wide"
              [class.text-slate-500]="!store.isDark()"
              [class.text-slate-400]="store.isDark()"
              >IMEI</label
            >
            <input
              class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.text-slate-900]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              [class.text-slate-100]="store.isDark()"
              placeholder="Optional"
              [ngModel]="store.imei()"
              (ngModelChange)="store.imei.set($event)"
            />
          </div>
          <div>
            <label
              class="block text-xs font-semibold uppercase tracking-wide"
              [class.text-slate-500]="!store.isDark()"
              [class.text-slate-400]="store.isDark()"
              >IMEI2</label
            >
            <input
              class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.text-slate-900]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              [class.text-slate-100]="store.isDark()"
              placeholder="Optional"
              [ngModel]="store.imei2()"
              (ngModelChange)="store.imei2.set($event)"
            />
          </div>
          <div>
            <label
              class="block text-xs font-semibold uppercase tracking-wide"
              [class.text-slate-500]="!store.isDark()"
              [class.text-slate-400]="store.isDark()"
              >SN</label
            >
            <input
              class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.text-slate-900]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              [class.text-slate-100]="store.isDark()"
              placeholder="Optional"
              [ngModel]="store.sn()"
              (ngModelChange)="store.sn.set($event)"
            />
          </div>
          <div>
            <label
              class="block text-xs font-semibold uppercase tracking-wide"
              [class.text-slate-500]="!store.isDark()"
              [class.text-slate-400]="store.isDark()"
              >channelId</label
            >
            <input
              class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
              [class.border-slate-300]="!store.isDark()"
              [class.bg-white]="!store.isDark()"
              [class.text-slate-900]="!store.isDark()"
              [class.border-slate-600]="store.isDark()"
              [class.bg-slate-800]="store.isDark()"
              [class.text-slate-100]="store.isDark()"
              placeholder="Optional"
              [ngModel]="store.channelId()"
              (ngModelChange)="store.channelId.set($event)"
            />
          </div>
        </div>
      }

      @if (store.readSupportMode() === 'params' && store.readSupportHints()) {
        <div class="mt-4 grid gap-3 md:grid-cols-2">
          @for (
            parameterName of store.readSupportHints()!.requiredParameters;
            track parameterName
          ) {
            <div>
              <label
                class="block text-xs font-semibold uppercase tracking-wide"
                [class.text-slate-500]="!store.isDark()"
                [class.text-slate-400]="store.isDark()"
                >{{ parameterName }}</label
              >
              <input
                class="mt-1 w-full rounded-lg border px-2 py-2 text-sm"
                [class.border-slate-300]="!store.isDark()"
                [class.bg-white]="!store.isDark()"
                [class.text-slate-900]="!store.isDark()"
                [class.border-slate-600]="store.isDark()"
                [class.bg-slate-800]="store.isDark()"
                [class.text-slate-100]="store.isDark()"
                placeholder="Required"
                [ngModel]="store.requiredParams()[parameterName] || ''"
                (ngModelChange)="store.setRequiredParam(parameterName, $event)"
              />
            </div>
          }
        </div>
      }

      <div class="mt-4">
        @if (store.readSupportMode() === 'imei') {
          <button
            class="rounded-xl bg-sky-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600"
            type="button"
            (click)="store.runReadSupportLookupByImei()"
          >
            Run IMEI lookup
          </button>
        }
        @if (store.readSupportMode() === 'sn') {
          <button
            class="rounded-xl bg-sky-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600"
            type="button"
            (click)="store.runReadSupportLookupBySn()"
          >
            Run SN lookup
          </button>
        }
        @if (store.readSupportMode() === 'params') {
          <button
            class="rounded-xl bg-sky-700 px-4 py-2 text-sm font-semibold text-white transition hover:bg-sky-600"
            type="button"
            (click)="store.runReadSupportLookupByParams()"
          >
            Run Params lookup
          </button>
        }
      </div>

      @if (store.readSupportResult()) {
        <p
          class="mt-3 rounded-xl border p-3 text-xs"
          [class.border-slate-200]="!store.isDark()"
          [class.bg-slate-50]="!store.isDark()"
          [class.text-slate-700]="!store.isDark()"
          [class.border-slate-700]="store.isDark()"
          [class.bg-slate-800]="store.isDark()"
          [class.text-slate-200]="store.isDark()"
        >
          code={{ store.readSupportResult()!.code || 'N/A' }}, desc={{
            store.readSupportResult()!.description || 'N/A'
          }}
        </p>
      }
    }
  </section>
}
