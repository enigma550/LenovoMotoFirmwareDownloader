<section class="rounded-3xl border p-8" [class.border-slate-200]="!store.isDark()" [class.bg-white]="!store.isDark()"
  [class.shadow-sm]="!store.isDark()" [class.border-slate-700]="store.isDark()" [class.bg-slate-900]="store.isDark()">
  <h2 class="text-2xl font-black tracking-tight" [class.text-slate-900]="!store.isDark()"
    [class.text-white]="store.isDark()">
    About
  </h2>

  <div class="mt-6 space-y-4 text-sm" [class.text-slate-600]="!store.isDark()" [class.text-slate-300]="store.isDark()">
    <p>
      <strong [class.text-slate-900]="!store.isDark()" [class.text-white]="store.isDark()">Version:</strong> {{
      store.appInfo()?.version || 'Unknown' }}
    </p>
    <p>
      <strong [class.text-slate-900]="!store.isDark()" [class.text-white]="store.isDark()">Platform:</strong>&nbsp;<span
        class="capitalize">{{ store.appInfo()?.platform || 'Unknown' }}</span>
    </p>
    @if (store.appInfo()?.channel) {
    <p>
      <strong [class.text-slate-900]="!store.isDark()" [class.text-white]="store.isDark()">Channel:</strong>&nbsp;<span
        class="capitalize">{{ store.appInfo()?.channel }}</span>
    </p>
    }
    <p>
      <strong [class.text-slate-900]="!store.isDark()" [class.text-white]="store.isDark()">Made by:</strong>&nbsp;<span
        class="font-semibold text-sky-600 dark:text-sky-400">enigma550</span>
    </p>
  </div>

  <div class="mt-8 flex flex-wrap gap-4">
    <button class="rounded-2xl border px-6 py-3 text-sm font-bold transition flex items-center gap-2"
      [class.border-slate-200]="!store.isDark()" [class.bg-white]="!store.isDark()"
      [class.text-slate-700]="!store.isDark()" [class.hover:bg-slate-50]="!store.isDark()"
      [class.border-slate-700]="store.isDark()" [class.bg-slate-800/50]="store.isDark()"
      [class.text-slate-200]="store.isDark()" [class.hover:bg-slate-800]="store.isDark()" type="button"
      (click)="openRepo()">
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <path
          d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
        </path>
      </svg>
      Git Repository
    </button>
    <button class="rounded-2xl border px-6 py-3 text-sm font-bold transition flex items-center gap-2"
      [class.border-slate-200]="!store.isDark()" [class.bg-white]="!store.isDark()"
      [class.text-slate-700]="!store.isDark()" [class.hover:bg-slate-50]="!store.isDark()"
      [class.border-slate-700]="store.isDark()" [class.bg-slate-800/50]="store.isDark()"
      [class.text-slate-200]="store.isDark()" [class.hover:bg-slate-800]="store.isDark()" type="button"
      (click)="checkUpdates()">
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
        stroke-linejoin="round">
        <polyline points="23 4 23 10 17 10"></polyline>
        <polyline points="1 20 1 14 7 14"></polyline>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
      </svg>
      Check for updates
    </button>
  </div>

  @if (desktopStatus() !== 'not_linux') {
  <div class="mt-8 border-t pt-8" [class.border-slate-200]="!store.isDark()" [class.border-slate-700]="store.isDark()">
    <h3 class="text-lg font-bold mb-2" [class.text-slate-900]="!store.isDark()" [class.text-white]="store.isDark()">
      Desktop Integration (Linux)
    </h3>
    <p class="text-sm mb-4" [class.text-slate-500]="!store.isDark()" [class.text-slate-400]="store.isDark()">
      Application shortcut for the launcher and dock.
    </p>

    @if (desktopStatus() === 'checking') {
    <p class="text-sm opacity-70">Checking status...</p>
    } @else if (desktopStatus() === 'ok') {
    <p class="text-sm font-semibold flex items-center gap-2" [class.text-emerald-600]="!store.isDark()"
      [class.text-emerald-400]="store.isDark()">
      <span
        class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-emerald-100 dark:bg-emerald-900 text-emerald-600 dark:text-emerald-400">âœ“</span>
      Shortcut is correctly configured.
    </p>
    } @else if (desktopStatus() === 'creating') {
    <p class="text-sm opacity-70">Creating shortcut...</p>
    } @else {
    <p class="text-sm font-semibold mb-3 flex items-center gap-2" [class.text-amber-600]="!store.isDark()"
      [class.text-amber-400]="store.isDark()">
      <span
        class="inline-flex items-center justify-center w-5 h-5 rounded-full bg-amber-100 dark:bg-amber-900 text-amber-600 dark:text-amber-400">!</span>
      Shortcut is not configured.
    </p>
    <button class="rounded-xl px-4 py-2 text-sm font-semibold transition bg-sky-600 text-white hover:bg-sky-700"
      type="button" (click)="createIntegration()">
      Create Desktop Shortcut
    </button>
    }
  </div>
  }

  @if (showUpdateModal()) {
  <div class="fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="absolute inset-0 bg-slate-900/40 transition-opacity" (click)="showUpdateModal.set(false)">
    </div>

    <div class="relative w-full max-w-md rounded-3xl border p-8 shadow-xl" [class.bg-white]="!store.isDark()"
      [class.border-slate-200]="!store.isDark()" [class.bg-slate-900]="store.isDark()"
      [class.border-slate-700]="store.isDark()">
      <div
        class="mx-auto flex h-16 w-16 items-center justify-center rounded-2xl border mb-6 transition-colors shadow-xs"
        [class.bg-white]="!store.isDark()" [class.border-sky-100]="!store.isDark()"
        [class.text-sky-600]="!store.isDark()" [class.bg-sky-900/30]="store.isDark()"
        [class.border-sky-800/50]="store.isDark()" [class.text-sky-400]="store.isDark()">
        <svg class="h-8 w-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
          <polyline points="23 4 23 10 17 10"></polyline>
          <polyline points="1 20 1 14 7 14"></polyline>
          <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
        </svg>
      </div>
      <h2 class="text-2xl font-black tracking-tight" [class.text-slate-900]="!store.isDark()"
        [class.text-white]="store.isDark()">
        Updater
      </h2>
      <p class="mt-4 mb-4 text-sm leading-relaxed" [class.text-slate-600]="!store.isDark()"
        [class.text-slate-300]="store.isDark()">
        @if (isAutomatedUpdate()) {
        A new version of LMFD is ready to install:<br>
        } @else {
        A new version is available for manual download:<br>
        }
        <strong [class.text-slate-900]="!store.isDark()" [class.text-white]="store.isDark()" class="text-lg">v{{
          frameworkUpdateInfo()?.version }}</strong>
      </p>
      <div class="mt-8 flex flex-col gap-3">
        <div class="grid grid-cols-2 gap-3">
          <button
            class="rounded-2xl border px-4 py-3 text-sm font-bold transition-colors flex items-center justify-center gap-2 whitespace-nowrap"
            [class.border-slate-200]="!store.isDark()" [class.bg-white]="!store.isDark()"
            [class.text-slate-700]="!store.isDark()" [class.hover:bg-slate-50]="!store.isDark()"
            [class.border-slate-700]="store.isDark()" [class.bg-slate-800/50]="store.isDark()"
            [class.text-slate-200]="store.isDark()" [class.hover:bg-slate-800]="store.isDark()" type="button"
            (click)="openReleasePage()">
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path
                d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
              </path>
            </svg>
            Release page
          </button>
          <button
            class="rounded-2xl bg-sky-600 px-4 py-3 text-sm font-bold text-white transition-colors hover:bg-sky-700 active:scale-[0.98] flex items-center justify-center gap-2 disabled:opacity-70 whitespace-nowrap"
            type="button" [disabled]="downloadingUpdate()" (click)="downloadAndApplyUpdate()">
            @if (downloadingUpdate()) {
            <svg class="h-5 w-5 animate-spin" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3"></circle>
              <path class="opacity-75" stroke="currentColor" stroke-width="3" stroke-linecap="round"
                d="M12 2a10 10 0 0 0-10 10"></path>
            </svg>
            } @else {
            <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="7 10 12 15 17 10"></polyline>
              <line x1="12" y1="15" x2="12" y2="3"></line>
            </svg>
            }
            {{ isAutomatedUpdate() ? 'Update now' : 'Download' }}
          </button>
        </div>
        <button class="mt-4 w-fit mx-auto text-sm font-medium opacity-50 hover:opacity-100 transition-colors"
          type="button" (click)="showUpdateModal.set(false)" [class.text-slate-900]="!store.isDark()"
          [class.text-white]="store.isDark()">
          Maybe later
        </button>
      </div>
    </div>
  </div>
  }
</section>